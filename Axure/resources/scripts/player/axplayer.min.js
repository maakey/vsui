if(!window.$axure)window.$axure=function(){};if(typeof console=="undefined")console={log:function(){}};if(window._axUtils)$axure.utils=_axUtils;$axure.loadDocument=function(document){$axure.document=document};function setUpController(){var _page={};$axure.page=_page;$axure.utils.makeBindable(_page,["load"]);var _player=function(){};$axure.player=_player;var _globalVars={};var _shouldSendVarsToServer=function(){try{var mainFrame=document.getElementById("mainFrame");return $axure.shouldSendVarsToServer(mainFrame.contentWindow.location.href)}catch(e){return $axure.shouldSendVarsToServer()}};var _getLinkUrl=function(baseUrl){var toAdd="";for(var globalVarName in _globalVars){var val=_globalVars[globalVarName];if(val!=null){if(toAdd.length>0)toAdd+="&";toAdd+=globalVarName+"="+encodeURIComponent(val)}}return toAdd.length>0?baseUrl+(_shouldSendVarsToServer()?"?":"#")+toAdd+"&CSUM=1":baseUrl};$axure.getLinkUrlWithVars=_getLinkUrl;$axure.messageCenter.addMessageListener(function(message,data){if(message=="setGlobalVar"){_globalVars[data.globalVarName]=data.globalVarValue}});$axure.messageCenter.addStateListener("page.data",function(key,value){for(var subKey in value){_page[subKey]=value[subKey]}$axure.page.triggerEvent("load")});_page.navigate=function(url,includeVariables){var mainFrame=document.getElementById("mainFrame");var urlToLoad;if(url.indexOf(":")<0||url[0]=="/"){var winHref=window.location.href;var page=winHref.substring(0,winHref.lastIndexOf("/")+1)+url;urlToLoad=page}else{urlToLoad=url}if(!includeVariables){mainFrame.contentWindow.location.href=urlToLoad;return}var urlWithVars=$axure.getLinkUrlWithVars(urlToLoad);var currentData=$axure.messageCenter.getState("page.data");var currentUrl=currentData&&currentData.location;if(currentUrl&&currentUrl.indexOf("#")!=-1)currentUrl=currentUrl.substring(0,currentUrl.indexOf("#"));mainFrame.contentWindow.location.href=currentUrl&&urlToLoad.toLowerCase()!=currentUrl.toLowerCase()?urlWithVars:"resources/reload.html#"+encodeURI(urlWithVars)};var pluginIds=[];var plugins={};var currentVisibleHostId=null;_player.createPluginHost=function(settings){if(!(!settings.context||settings.context==="interface")){throw"unknown context type"}if(!settings.id)throw"each plugin host needs an id";var host=$("<div id="+settings.id+"></div>").appendTo("#interfaceControlFrameHostContainer");host.hide();var headerLink=$('<a pluginId="'+settings.id+'" >'+settings.title.toUpperCase()+"</a>");headerLink.click($axure.utils.curry(interfaceControlHeaderButton_click,settings.id)).wrap('<li id="'+settings.id+'Btn">');if((settings.id=="feedbackHost"||settings.id=="feedbackContainer")&&pluginIds[pluginIds.length-1]=="debugHost")headerLink.parent().insertBefore("#debugHostBtn");else headerLink.parent().appendTo("#interfaceControlFrameHeader");pluginIds[pluginIds.length]=settings.id;plugins[settings.id]=settings;$(document).trigger("pluginCreated",[settings.gid])};var interfaceControlHeaderButton_click=function(id){var clickedPlugin=$("#interfaceControlFrameHeader a[pluginId="+id+"]");if(clickedPlugin.hasClass("selected")){clickedPlugin.removeClass("selected");$("#"+id).hide();_player.collapseToBar();$(document).trigger("pluginShown",[""])}else{$("#interfaceControlFrameHeader a").removeClass("selected");clickedPlugin.addClass("selected");$("#"+currentVisibleHostId).hide();$("#"+id).show();currentVisibleHostId=id;_player.expandFromBar();$(document).trigger("pluginShown",[plugins[id].gid])}$(document).trigger("ContainerHeightChange")};$axure.player.showPlugin=function(gid){for(var id in plugins){if(plugins[id].gid==gid){$('a[pluginId="'+id+'"]').click();break}}}}function setUpDocumentStateManager(){var mgr=$axure.prototype.documentStateManager={};$axure.utils.makeBindable(mgr,["globalVariableChanged"]);mgr.globalVariableValues={};mgr.setGlobalVariable=function(varname,value,source){var arg={};arg.variableName=varname;arg.newValue=value;arg.oldValue=this.getGlobalVariable(varname);arg.source=source;mgr.globalVariableValues[varname]=value;this.triggerEvent("globalVariableChanged",arg)};mgr.getGlobalVariable=function(varname){return mgr.globalVariableValues[varname]}}function setUpPageStateManager(){var mgr=$axure.prototype.pageStateManager={};mgr.panelToStateIds={}}