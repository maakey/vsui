function VsuiPicker(){const e=arguments[arguments.length-1],t=$.extend({tapName1:"按钮选择器",tapName2:"时间选择器",btnName1:"按钮1",btnName2:"按钮2",btnName3:"按钮3",btnData1:"data1",btnData2:"data2",btnData3:"data3",onChoose:$.noop,onConfirm:$.noop},e);$(".vsui-content").css("padding-top",function(){return parseInt($(".vsui-content").css("padding-top"))+26+"px"});let i='<div class="vsui-picker"><div class="vsui-btnPicker" id="vsui-choose" style="display: none"><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-choose-btn" data-btn-data="'+t.btnData1+'">'+t.btnName1+'</a><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-choose-btn" data-btn-data="'+t.btnData2+'">'+t.btnName2+'</a><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-choose-btn" data-btn-data="'+t.btnData3+'">'+t.btnName3+'</a></div><div class="vsui-btnPicker" id="vsui-date" style="display: none"><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-Data-btn" data-date-data="week">七天</a><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-date-btn" data-date-data="month">三十天</a><a href="javascript:;" class="vsui-btn vsui-btn_blue vsui-date-btn" data-date-data="all">全部</a></div><div class="vsui-datePicker" style="display: none"><div class="vsui-picker__hd">自定义时间</div><div class="vsui-picker__bd"><div class="vsui-picker__middle">至</div></div><div class="vsui-picker__fd"><a href="javascript:;" data-action="select" id="vsui-picker-confirm" class="vsui-btn vsui-btn_blue vsui-picker__action">确定</a></div></div><div class="vsui-picker-tapGroup"><div class="vsui-picker-tap" id="vsTap1">'+t.tapName1+'</div><div class="vsui-picker-tap" id="vsTap2">'+t.tapName2+'</div></div></div><div class="vsui-mask content"></div>';$(".vsui-header").after(i);let n=new datePicker({start:"1989-01-06",end:2020,property:"start"}),s=new datePicker({start:"1993-03-21",end:2020,property:"end"}),a=!1,o=!1;$(".vsui-picker-tap").on("click",function(){switch($(this).attr("id")){case"vsTap1":a?(o||($("#vsTap2").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-choose").hide()},600)),a=!1):(o?($(".vsui-picker__mask").hide(),$("#vsTap1").removeClass("active"),$("#vsTap2").addClass("active"),$("#vsui-choose").show(),$(".vsui-picker").height(84),$("#vsui-date").fadeOut(),setTimeout(function(){$(".vsui-datePicker").hide()},600),o=!1):($("#vsui-choose").show(),$("#vsTap2").addClass("active"),$(".vsui-picker").height(84),$(".vsui-mask.content").show().removeClass("vsui-animate-fade-out").addClass("vsui-animate-fade-in")),a=!0);break;case"vsTap2":a?o||($(".vsui-datePicker").show(),$("#vsTap1").addClass("active"),$("#vsTap2").removeClass("active"),$(".vsui-picker").height(307),$("#vsui-date").fadeIn(),setTimeout(function(){$(".vsui-picker__mask").show(),$("#vsui-choose").hide()},600),a=!1,o=!0):o?($(".vsui-picker__mask").hide(),$("#vsTap1").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-date").hide(),$(".vsui-datePicker").hide()},600),o=!1):($("#vsui-date").show(),$(".vsui-datePicker").show(),$("#vsTap1").addClass("active"),$(".vsui-picker").height(307),$(".vsui-mask.content").show().removeClass("vsui-animate-fade-out").addClass("vsui-animate-fade-in"),setTimeout(function(){$(".vsui-picker__mask").show()},500),o=!0)}}),$(".vsui-mask.content").on("click",function(){a?($("#vsTap2").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-choose").hide()},600),a=!1):o&&($(".vsui-picker__mask").hide(),$("#vsTap1").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-date").hide(),$(".vsui-datePicker").hide()},600),o=!1)}),$(".vsui-choose-btn").on("click",function(){let e={label:$(this).html(),value:$(this).data("btn-data")};t.onChoose(new Result(e)),$("#vsTap2").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").fadeOut(),setTimeout(function(){$("#vsui-choose").hide()},600),a=!1}),$(".vsui-date-btn").on("click",function(){let e,i,n,s,a,l,u,c,r,d=new Date;switch(a={label:d.getFullYear(),value:d.getFullYear()},l={label:d.getMonth()+1,value:d.getMonth()+1},u={label:d.getDate(),value:d.getDate()},$(this).data("date-data")){case"week":i={label:(e=new Date(d.getTime()-6048e5)).getFullYear(),value:e.getFullYear()},n={label:e.getMonth()+1,value:e.getMonth()+1},s={label:e.getDate(),value:e.getDate()},c=[new Result(i),new Result(n),new Result(s)],r=[new Result(a),new Result(l),new Result(u)];break;case"month":i={label:(e=new Date(d.getTime()-2592e6)).getFullYear(),value:e.getFullYear()},n={label:e.getMonth()+1,value:e.getMonth()+1},s={label:e.getDate(),value:e.getDate()},c=[new Result(i),new Result(n),new Result(s)],r=[new Result(a),new Result(l),new Result(u)];break;default:let t={label:"all",value:0};c=[new Result(t),new Result(t),new Result(t)],r=[new Result(t),new Result(t),new Result(t)]}t.onConfirm(c,r),$(".vsui-picker__mask").hide(),$("#vsTap1").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-date").hide(),$(".vsui-datePicker").hide()},600),o=!1}),$(".vsui-picker__action").on("click",function(){t.onConfirm(n.result,s.result),$(".vsui-picker__mask").hide(),$("#vsTap1").removeClass("active"),$(".vsui-picker").height(26),$(".vsui-mask.content").removeClass("vsui-animate-fade-in").addClass("vsui-animate-fade-out"),setTimeout(function(){$(".vsui-mask.content").hide(),$("#vsui-date").hide(),$(".vsui-datePicker").hide()},600),o=!1})}function VsuiDialog(e={}){function t(e){t=$.noop,o.addClass("vsui-animate-fade-out"),a.addClass("vsui-animate-fade-out").on("animationend webkitAnimationEnd",function(){s.remove(),_sington=!1,e&&e()})}function i(e){t(e)}if(_sington)return _sington;let n="";n='<div class="'+(e=$.extend({title:null,content:"",className:"",buttons:[{label:"确定",type:"primary",onClick:$.noop}]},e)).className+'"><div class="vsui-mask fullScreen"></div><div class="vsui-dialog">',e.title?n+='<strong class="vsui-dialog__title">'+e.title+"</strong>":n+='<strong class="vsui-dialog__title"></strong>',n+='<div class="vsui-dialog__content">'+e.content+"</div>",n+='<div class="vsui-dialog__btnTeam">';for(let t=0;t<e.buttons.length;t++)n+='<a href="javascript:;" class="vsui-dialog__btn vsui-dialog__btn_'+e.buttons[t].type+'">'+e.buttons[t].label+"</a>";n+="</div></div></div>";const s=$(render(n,e)),a=s.find(".vsui-dialog"),o=s.find(".vsui-mask");return $("body").append(s),$(".vsui-mask").show(),o.show().addClass("vsui-animate-fade-in"),a.addClass("vsui-animate-fade-in"),s.on("click",".vsui-dialog__btn",function(t){const n=$(this).index();e.buttons[n].onClick?!1!==e.buttons[n].onClick.call(this,t)&&i():i()}),_sington=s[0],_sington.hide=i,_sington}function alert(e="",t=$.noop,i){return"object"==typeof t&&(i=t,t=$.noop),i=$.extend({content:e,buttons:[{label:"确定",type:"primary",onClick:t}]},i),VsuiDialog(i)}function confirm(e="",t=$.noop,i=$.noop,n){return"object"==typeof t?(n=t,t=$.noop):"object"==typeof i&&(n=i,i=$.noop),n=$.extend({content:e,buttons:[{label:"取消",type:"default",onClick:i},{label:"确定",type:"primary",onClick:t}]},n),VsuiDialog(n)}function VsuiPrompt(e={}){function t(e){t=$.noop,l.addClass("vsui-animate-fade-out"),o.addClass("vsui-animate-fade-out").on("animationend webkitAnimationEnd",function(){a.remove(),_sington=!1,e&&e()})}function i(e){t(e)}if(_sington)return _sington;let n="",s="";n='<div class="'+(e=$.extend({title:null,input:[{label:"标签",type:"checkbox",name:"label"},{label:"文本框",type:"text",name:"input"}],more:null,buttons:[{label:"取消",type:"cancel"},{label:"确定",type:"submit"}],className:"",onConfirm:$.noop},e)).className+'"><div class="vsui-mask fullScreen"></div><div class="vsui-prompt">',e.title?n+='<strong class="vsui-prompt__hd">'+e.title+"</strong>":n+='<strong class="vsui-prompt__hd"></strong>',n+='<div class="vsui-prompt__bd">';for(let t=0;t<e.input.length;t++)"checkbox"===e.input[t].type?n+='<label class="vsui-input-checkbox inline" for="vsPromptId'+t+'"><input type="checkbox" name="'+e.input[t].name+'" id="vsPromptId'+t+'" value="'+e.input[t].value+'"><div class="vsui-icon" style="'+e.input[t].style+'"></div><p style="'+e.input[t].style+'">'+e.input[t].label+"</p></label>":"text"===e.input[t].type&&(n+='<div class="vsui-input-text inline"><div class="name" style="'+e.input[t].style+'">'+e.input[t].label+'</div><input name="'+e.input[t].name+'" type="text" style="'+e.input[t].style+'"></div>');e.more&&(n+='<div class="vsui-prompt-more">'+e.more.text+"</div>"),n+='</div><div class="vsui-prompt__fd">';for(let t=0;t<e.buttons.length;t++)n+='<a href="javascript:;" class="vsui-btn vsui-btn__'+e.buttons[t].type+'">'+e.buttons[t].label+"</a>";n+="</div></div>";const a=$(render(n,e)),o=a.find(".vsui-prompt"),l=a.find(".vsui-mask");return $("body").append(a),$(".vsui-mask").show(),l.show().addClass("vsui-animate-fade-in"),o.addClass("vsui-animate-fade-in"),$(".vsui-btn__submit").on("click",function(){let t=[];o.find(".vsui-input-checkbox").each(function(){$(this).children("input").is(":checked")&&t.push({label:$(this).children("p").html(),name:$(this).children("input").attr("name"),type:"checkbox",value:$(this).children("input").val()})}),o.find(".vsui-input-text").each(function(){""!=$(this).children("input").val()&&t.push({label:$(this).children(".name").html(),name:$(this).children("input").attr("name"),type:"text",value:$(this).children("input").val()})}),0==t.length&&(t=null),e.onConfirm(t),i()}),$(".vsui-btn__cancel").on("click",function(){i()}),$(".vsui-prompt-more").on("click",function(){if("checkbox"===e.more.type){let t=generateMixed(6);s='<label class="vsui-input-checkbox inline" for="vsPromptId'+t+'"><input type="checkbox" name="'+e.more.name+'" id="vsPromptId'+t+'"><div class="vsui-icon" style="'+e.more.style+'"></div><p style="'+e.more.style+'">'+e.more.label+"</p></label>"}else"text"===e.more.type&&(s='<div class="vsui-input-text inline"><div class="name" style="'+e.more.style+'">'+e.more.label+'</div><input name="'+e.more.name+'" type="text" style="'+e.more.style+'"></div>');$(this).before(s),console.log(e.more)}),_sington=a[0],_sington.hide=i,_sington}function generateMixed(e){let t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],i="";for(let n=0;n<e;n++){let e=Math.ceil(15*Math.random());i+=t[e]}return i}function Result(e){this.label=e.label,this.value=e.value}function picker(){function e(t){e=$.noop,u.remove(),_sington=!1,t&&t()}function t(e,i){if(void 0===l[i]&&n.defaultValue&&void 0!==n.defaultValue[i]){const t=n.defaultValue[i];let s=0,a=e.length;for(;s<a&&t!=e[s].value;++s);s<a?l[i]=s:console.warn("Picker has not match defaultValue: "+t)}u.find(".vsui-picker__group").eq(i).scroll({items:e,temp:l[i],onChange:function(e,s){o[i]=e?new Result(e):null,l[i]=s,a?n.onChange(o):e.children&&e.children.length>0?(u.find(".vsui-picker__group").eq(i+1).show(),!a&&t(e.children,i+1)):(o.splice(i+1),n.onChange(o))},onConfirm:n.onConfirm})}const i=arguments[arguments.length-1],n=$.extend({id:"default",className:"",container:"body",onChange:$.noop,onConfirm:$.noop},i);let s,a=!1;if(arguments.length>2){let e=0;for(s=[];e<arguments.length-1;)s.push(arguments[e++]);a=!0}else s=arguments[0];temp[n.id]=temp[n.id]||[];const o=[],l=temp[n.id],u=$(render('<div class="vsui-picker__dateItem"></div>',n));i.depth||(a?s.length:depthOf(s[0]));let c="";c='<div class="vsui-picker__group x4">            <div class="vsui-picker__mask"></div>        <div class="vsui-picker__indicator"></div>        <div class="vsui-picker__content"></div>        </div> <div class="vsui-picker__group x2">        <div class="vsui-picker__mask"></div>        <div class="vsui-picker__indicator"></div>        <div class="vsui-picker__content"></div>        </div>        <div class="vsui-picker__group x2">        <div class="vsui-picker__mask"></div>        <div class="vsui-picker__indicator"></div>        <div class="vsui-picker__content"></div>        </div>',u.html(c),"start"==n.property?$(".vsui-picker__bd").prepend(u):"end"==n.property&&$(".vsui-picker__bd").append(u),a?s.forEach((e,i)=>{t(e,i)}):t(s,0),(_sington=u[0]).hide=function(t){e(t)},this.result=o}function datePicker(e){const t=$.extend({id:"datePicker",onChange:$.noop,onConfirm:$.noop,start:2e3,end:2030,property:"start",defaultValue:[(new Date).getFullYear(),(new Date).getMonth()+1,(new Date).getDate()],cron:"* * *"},e);"number"==typeof t.start?t.start=new Date(`${t.start}-01-01`):"string"==typeof t.start&&(t.start=new Date(t.start)),"number"==typeof t.end?t.end=new Date(`${t.end}-12-31`):"string"==typeof t.end&&(t.end=new Date(t.end));const i=(e,t,i)=>{for(let n=0,s=e.length;n<s;n++){const s=e[n];if(s[t]==i)return s}},n=[],s=parse(t.cron,t.start,t.end);let a;do{const e=(a=s.next()).value.getFullYear(),t=a.value.getMonth()+1,o=a.value.getDate();let l=i(n,"value",e);l||(l={label:e,value:e,children:[]},n.push(l));let u=i(l.children,"value",t);u||(u={label:2==String(t).length?String(t):"0"+t,value:t,children:[]},l.children.push(u)),u.children.push({label:2==String(o).length?String(o):"0"+o,value:o})}while(!a.done);return new picker(n,t)}function parseField(e,t){const i=t[0],n=t[1];let s,a=[];const o=(e=e.replace(/\*/g,i+"-"+n)).split(",");for(let e=0,t=o.length;e<t;e++){const t=o[e];t.match(regex)&&t.replace(regex,function(e,t,o,l){l=parseInt(l)||1,t=Math.min(Math.max(i,~~Math.abs(t)),n),o=o?Math.min(n,~~Math.abs(o)):t,s=t;do{a.push(s),s+=l}while(s<=o)})}return a}function parse(e,t,i){const n=[];return e.replace(/^\s\s*|\s\s*$/g,"").split(/\s+/).forEach((e,t)=>{const i=constraints[t];n.push(parseField(e,i))}),new Schedule(n,t,i)}document.addEventListener("touchstart",function(){},!1),$(document).ready(function(){$(".vsui-header").width($(window).width()-24),$(".vsui-content").width($(window).width()-24),$(".vsui-footer").width($(window).width()-24),$(".vsui-picker").width($(window).width()-24),$(".vsui-radio input[type='radio']").on("click",function(){$(".vsui-radio").each(function(){$(this).removeClass("checked")}),$(".vsui-radio-input").removeClass("checked"),$(".vsui-radio input:checked").each(function(){$(this).parent("label").addClass("checked")})}),$(".vsui-radio-input input[type='text']").on("click",function(){$(".vsui-radio").each(function(){$(this).removeClass("checked")}),$(".vsui-radio-input").addClass("checked")}),$("form.vsui-radioPage").submit(function(e){e.preventDefault();let t=$(this).attr("action")?"action='"+$(this).attr("action")+"'":"",i=$(this).attr("method")?"method='"+$(this).attr("method")+"'":"",n=$(this).attr("name")?"name='"+$(this).attr("name")+"'":"",s=$(this).children(".checked").children("input"),a=s.attr("name")?"name='"+s.attr("name")+"'":"",o=$.trim(s.val());if(o.length<1)return!1;let l=generateMixed(8),u="<form id='"+l+"' "+t+" "+i+" "+n+" style='display:none'>";u+="<input type=hidden "+a+" value='"+o+"'/>",u+="</form>",$(this).after(u),$("#"+l).submit()}),$("input[type='text']").on("focus",function(){let e=this;setTimeout(function(){e.scrollIntoViewIfNeeded()},200)})}),Result.prototype.toString=function(){return this.value},Result.prototype.valueOf=function(){return this.value};let _sington,temp={};const setTransition=(e,t)=>e.css({"-webkit-transition":`all ${t}s`,transition:`all ${t}s`}),setTranslate=(e,t)=>e.css({"-webkit-transform":`translate3d(0, ${t}px, 0)`,transform:`translate3d(0, ${t}px, 0)`}),getDefaultIndex=e=>{let t=Math.floor(e.length/2),i=0;for(;e[t]&&e[t].disabled;)if(t=++t%e.length,++i>e.length)throw new Error("No selectable item.");return t},getDefaultTranslate=(e,t,i)=>(e-getDefaultIndex(i))*t,getMax=(e,t)=>e*t,getMin=(e,t,i)=>-t*(i-e-1);$.fn.scroll=function(e){function t(e){l=e,c=+new Date}function i(e){const t=(u=e)-l;setTransition(d,0),setTranslate(d,r+t),c=+new Date,v.push({time:c,y:u}),v.length>40&&v.shift()}function n(e){if(!l)return;const t=(new Date).getTime(),i=p-s.bodyHeight/2;if(u=e,t-c>100)h(Math.abs(u-l)>10?u-l:i-u);else if(Math.abs(u-l)>10){const e=v.length-1;let t=e;for(let i=e;i>0&&c-v[i].time<100;i--)t=i;if(t!==e){const i=v[e],n=v[t],s=i.time-n.time,a=i.y-n.y,o=a/s,c=150*o+(u-l);h(c)}else h(0)}else h(i-u);l=null}const s=$.extend({items:[],scrollable:".vsui-picker__content",offset:1,rowHeight:34,onChange:$.noop,temp:null,bodyHeight:102},e),a=s.items.map(e=>`<div class="vsui-picker__item${e.disabled?" vsui-picker__item_disabled":""}">${e.label}</div>`).join(""),o=$(this);o.find(".vsui-picker__content").html(a);let l,u,c,r,d=o.find(s.scrollable);const v=[],p=window.innerHeight;if(null!==s.temp&&s.temp<s.items.length){const e=s.temp;s.onChange.call(this,s.items[e],e),r=(s.offset-e)*s.rowHeight}else{const e=getDefaultIndex(s.items);s.onChange.call(this,s.items[e],e),r=getDefaultTranslate(s.offset,s.rowHeight,s.items)}setTranslate(d,r);const h=e=>{r+=e,r=Math.round(r/s.rowHeight)*s.rowHeight;const t=getMax(s.offset,s.rowHeight),i=getMin(s.offset,s.rowHeight,s.items.length);r>t&&(r=t),r<i&&(r=i);let n=s.offset-r/s.rowHeight;for(;s.items[n]&&s.items[n].disabled;)e>0?++n:--n;r=(s.offset-n)*s.rowHeight,setTransition(d,.3),setTranslate(d,r),s.onChange.call(this,s.items[n],n)};d=o.offAll().on("touchstart",function(e){t(e.changedTouches[0].pageY)}).on("touchmove",function(e){i(e.changedTouches[0].pageY),e.preventDefault()}).on("touchend",function(e){n(e.changedTouches[0].pageY)}).find(s.scrollable),"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||o.on("mousedown",function(e){t(e.pageY),e.stopPropagation(),e.preventDefault()}).on("mousemove",function(e){l&&(i(e.pageY),e.stopPropagation(),e.preventDefault())}).on("mouseup mouseleave",function(e){n(e.pageY),e.stopPropagation(),e.preventDefault()})};const regex=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g,constraints=[[1,31],[1,12],[0,6]];class Schedule{constructor(e,t,i){this._dates=e[0],this._months=e[1],this._days=e[2],this._start=t,this._end=i,this._pointer=t}_findNext(){let e;for(;;){if(this._end.getTime()-this._pointer.getTime()<=0)throw new Error(`out of range, end is ${this._end}, current is ${this._pointer}`);const t=this._pointer.getMonth(),i=this._pointer.getDate(),n=this._pointer.getDay();if(-1!==this._months.indexOf(t+1))if(-1!==this._dates.indexOf(i)){if(-1!==this._days.indexOf(n)){e=new Date(this._pointer);break}this._pointer.setDate(i+1)}else this._pointer.setDate(i+1);else this._pointer.setMonth(t+1),this._pointer.setDate(1)}return e}next(){const e=this._findNext();return this._pointer.setDate(this._pointer.getDate()+1),{value:e,done:!this.hasNext()}}hasNext(){try{return this._findNext(),!0}catch(e){return!1}}}let render=function(e,t){const i="let p=[];with(this){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');";return new Function(i).apply(t)};const depthOf=e=>{let t=1;return e.children&&e.children[0]&&(t=depthOf(e.children[0])+1),t};let getStyle=function(e,t){let i,n=(e.ownerDocument||document).defaultView;return n&&n.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,(e,t)=>t.toUpperCase()),i=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(i)?(t=>{let i=e.style.left,n=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=i,e.runtimeStyle.left=n,t})(i):i):void 0};$.fn.offAll=function(){return this};